<extend name="Main:baseTemplate" />
<block name="title">
    <title>分单量数据分析-按时间段图表界面</title>
</block>
<block name="style">
<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/select2/select2.css" />
<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css" />
</block>
<block name="content">
    <section class="content-header">
        <h1>分单量数据分析</h1>
    </section>
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-default">
                    <div class="box-header with-border">
                        <div class="btn-group btn-group" role="group" aria-label="Large button group">
                            <button type="button" class="btn btn-default">分单量总览</button>
                            <button type="button" class="btn btn-info">分时段统计</button>
                            <button type="button" class="btn btn-default">数据分析</button>
                        </div>
                    </div>
                </div>
                <div class="box box-default">
                    <div class="box-header with-border text-center">
                        <div class="box-title">单时段部门人均分单量折线图</div>
                    </div>
                    <div class="box-header">
                            <select style="padding: 4px;margin-right: 15px" id="selectChart" class="pull-left col-xs-1">
                        <option value="折线图">折线图</option>
                        <option value="柱状图">柱状图</option>
                        <option value="饼状图">饼状图</option>
                        </select>
                        <select id="c01-select" class="form-control select2 select2-hidden-accessible" multiple="" data-placeholder="选择时间段" style="display: inline-block;width: 60%" tabindex="-1" aria-hidden="true">
                              <option>1:00-2:00</option>
                              <option>1:00-3:00</option>
                              <option>1:00-4:00</option>
                              <option>1:00-5:00</option>
                              <option>1:00-6:00</option>
                              <option>1:00-7:00</option>
                              <option>1:00-8:00</option>
                            <select> 

                   <!--  <div class="from-item col-xs-3" >
                       <span class="cai-nian">添加时间段：</span>
                       <input type="text" name="date" class="datepicker cai-nian-input" placeholder="选择年份" value="">
                    </div> -->
                       
                        <div class="pull-right" role="group" aria-label="Large button group">
                            <button type="button" class="btn btn-info">切换至部门</button>
                            <button type="button" class="btn btn-info">切换至表格</button>
                        </div>
                    </div>
                    <div class="box-header text-right" style="padding-top: 0;padding-bottom:0;text-decoration:underline">
                        <a href="#">按平均值查看</a>
                    </div>
                    <div class="box-body">
                        <!-- <div class="col-xs-2">
                            <input id="oldMouth" type="radio" checked="checked">
                            <label for="oldMouth" class="text-success">上月发单量平均值</label>
                        </div>
                        <div class="col-xs-2">
                            <input id="currentMouth" type="radio" name="">
                            <label for="currentMouth" class="text-warning">本月发单量平均值</label>
                        </div> -->
                        <div id="canvas" class="col-xs-12 no-padding" style="height: 600px;">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</block>
<block name="script">
<script type="text/javascript" src="/assets/common/js/plugins/select2/select2.full.min.js"></script>
<script type="text/javascript" src="/assets/common/js/plugins/datetimepicker/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="/assets/common/js/echarts.min.js"></script>
<script type="text/javascript">
    $(".datepicker").datepicker({
        format:"yyyy-mm-dd",
        minViewMode:0,
        autoclose:'ture'
    });

    $("#c01-select").select2({
      multiple: true,
      // templateSelection:function(res){
      //   console.log(res.text)
      // }

      templateSelection:function(res){
            switch (res.id){
                case "1:00-2:00":

                option.series[0].data = [10, 20, 30, 40, 50, 60, 70,80];
                option.legend.data[0] = '本月发单量平均值1';
                 // option.series[0].name='上月发单量平均值11';
                var myChart = echarts.init(Dom);
                myChart.setOption(option);

                break;

                case "1:00-3:00":

                option.series[1].data = "";
                option.series[1].data = [80, 70, 60, 50, 40, 30, 20,10];
                option.legend.data[1] = '上月发单量平均值2';
                // option.series[1].name='上月发单量平均值22';
                var myChart = echarts.init(Dom);
                myChart.setOption(option);

                break;
                case "1:00-4:00":

                option.series[2].data = "";
                option.series[2].data = [15, 10, 60, 35, 45, 55, 25,15];
                option.legend.data[2] = '上月发单量平均值3';
                // option.series[2].name='上月发单量平均值33';
                var myChart = echarts.init(Dom);
                myChart.setOption(option);

                break;


            case "1:00-5:00":

                option.series[3].data = "";
                option.series[3].data = [15, 10, 60, 35, 45, 55, 25,15];
                option.legend.data[3] = '上月发单量平均值4';
                // option.series[2].name='上月发单量平均值33';
                var myChart = echarts.init(Dom);
                myChart.setOption(option);

                break;

            }
            console.log(res)
            return res.id
        }

    });

    var Dom = document.querySelector("#canvas");
    var myChart = echarts.init(Dom);
    var option = {
        /*title: {
            text: '对数轴示例',
            left: 'center'
        },*/
        tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b} : {c}'
        },
        legend: {
            left: 'left',
            data: ['本月发单量平均值1', '上月发单量平均值2','上月发单量平均值3','上月发单量平均值4']
        },
        xAxis: {
            type: 'category',
            name: 'x',
            splitLine: {show: false},
            data: ['6月1日', '6月2日', '6月3日', '6月4日', '6月5日', '6月6日', '6月7日', '6月8日']
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        yAxis: {
            type: 'value',
            name: 'y',
            splitNumber:10,
             min: 0,
             // max: 4
        },
        series: [
            {
                name: '本月发单量平均值1',
                type: 'line',
                data: [0.5, 0.5, 1, 1.5, 2, 2.5,3,3.5]
            },
            {
                name: '上月发单量平均值2',
                type: 'line',
                data: [1.5, 1, 0.5, 1, 2, 2.5,2,3]
            },
            {
                name: '上月发单量平均值3',
                type: 'line',
                data: [1, 1.5, 3.5, 1.5, 2.5, 1.5,2,3.5]
            },
            {
                name: '上月发单量平均值4',
                type: 'line',
                data: [1, 1.5, 3.5, 1.5, 2.5, 1.5,2,3.5]
            },
           
        ]
    };
    myChart.setOption(option);

    window.onresize=function(){
        var myChart = echarts.init(Dom);
        myChart.setOption(option);
    }
   

   $('#selectChart').on('change',function(event){
      var chartValue=$(this).val();
      var opt=option;
      if(chartValue=="折线图"){
         for(var i=0;i<opt.series.length;i++){
            opt.series[i].type='line'
         }
        var myChart = echarts.init(Dom);
        myChart.setOption(option);

         }else if(chartValue=="柱状图"){
            for(var i=0;i<opt.series.length;i++){
            opt.series[i].type='bar'
         }
        var myChart = echarts.init(Dom);
        myChart.setOption(option);
         }else if(chartValue=="饼状图"){
            for(var i=0;i<opt.series.length;i++){
            opt.series[i].type='pie'
         }
        var myChart = echarts.init(Dom);
        myChart.setOption(option);
         }
      })
</script>
</block>
<!-- pie line bar -->