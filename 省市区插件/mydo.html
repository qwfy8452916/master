<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    
		
    <script type="text/javascript" src="js/allCity.js"></script>
    <script type="text/javascript" src="js/jroll.js"></script>
    <style>
        body{margin: 0;padding: 0;}
        .cityyy{position: fixed;background: rgba(0,0,0,0.5);top: 0;left: 0;bottom: 0;right: 0;
        margin: auto;z-index: 999;display: none;}
        .citywrap{width: 80%;background: #fff;height: 100%;z-index: 9999;position: fixed;top: 0;right: -500px;display: none;}
        .div-wk{width: 30%;overflow: hidden;height: 100%;float: left;}
        ul{list-style: none;}
        ul li{list-style: none;}
        .activity{color: #ff5353;}
    </style>
</head>
<body>
    <input type="text" class="city">
 <div class="cityyy"></div>
 <div class="citywrap">
    <div class="div-left div-wk"></div>
    <div class="div-center div-wk"></div>
    <div class="div-right div-wk"></div>
</div>

    <script>

      $(function(){
        rlpca.shift();
        for(var i=0;i<rlpca.length;i++){
          rlpca[i].children.shift();
          for(var j=0;j<rlpca[i].children.length;j++){
             rlpca[i].children[j].children.shift()
          }
        }



        $('.city').click(function(){
            $('.cityyy').fadeIn(100);
            $('.citywrap').show().stop().animate({right:"0"},300)
            jroll = new JRoll(".div-left", {id: "scroller"});
		    jroll1 = new JRoll(".div-center", {id: "scroller1"});
		    jroll2 = new JRoll(".div-right", {id: "scroller2"}); 
        })
        $('.cityyy').click(function(){
            $('.cityyy').hide();
            $('.citywrap').animate({right:"-500px"},300,function(){
                $('.citywrap').hide()
            })
        })
        
        console.log(rlpca[0].children[0].children)
        init()

        function init(){
            createleft(rlpca);
            createcenter(rlpca[0].children,0,0);
            createright(rlpca[0].children[0].children,0,0,0);
        }

        $('body').on('click','.left_li',function(){
            var id=$(this).data('id')
            createcenter(rlpca[id].children,id,0);
            createright(rlpca[id].children[0].children,id,0,0)
            $(this).addClass('activity')
            $(this).siblings().removeClass('activity')
            jroll1 = new JRoll(".div-center", {id: "scroller1"});
		    jrol2 = new JRoll(".div-right", {id: "scroller2"});
        })

        $('body').on('click','.center_li',function(){
            var id=$(this).data('id')
            var rootid=$(this).data('rootid')
            createright(rlpca[rootid].children[id].children,rootid,id)
            $(this).addClass('activity')
            $(this).siblings().removeClass('activity')
            jrol2 = new JRoll(".div-right", {id: "scroller2"});
        })

        $('body').on('click','.right_li',function(){
            var id=$(this).data('id')
            var rootid=$(this).data('rootid')
            var parentid=$(this).data('parentid')

            $(this).addClass('activity')
            $(this).siblings().removeClass('activity')
            console.log(rootid+'+'+parentid+'+'+id)
            $('.city').val(rlpca[rootid].text+' '+rlpca[rootid].children[parentid].text+' '+rlpca[rootid].children[parentid].children[id].text)
            $('.cityyy').hide();
            $('.citywrap').animate({right:"-500px"},300,function(){
                $('.citywrap').hide()
            })

            
        })

       function createleft(data){
         var html=[];
         html.push('<ul>');
         $.each(data,function(index,obj){
           html.push('<li class="left_li" data-id="'+index+'">'+obj.text+'</li>')
         })
         html.push('</ul>')
         html=html.join('')
         $('.div-left').html(html)
         $('.left_li').first().addClass('activity')
       }

       function createcenter(data,rootid){
          var html=[];
          html.push('<ul>')
          $.each(data,function(index,obj){
             html.push('<li class="center_li" data-rootid="'+rootid+'" data-id="'+index+'">'+obj.text+'</li>')
          })
          html.push('</ul>')
          html=html.join(''),
          $('.div-center').html(html)
          $('.center_li').first().addClass('activity')
       }

       function createright(data,rootid,parentid){
           var html=[];
           html.push('<ul>')
           $.each(data,function(index,obj){
            html.push('<li class="right_li" data-rootid="'+rootid+'" data-parentid="'+parentid+'" data-id="'+index+'">'+obj.text+'</li>')
           })
           html.push('</ul>')
           html=html.join('')
           $('.div-right').html(html)
        //    $('.right_li').first().addClass('activity')
       }





      })
    

    
    </script>
</body>
</html>