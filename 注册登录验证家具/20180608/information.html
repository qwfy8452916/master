<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
    <meta content="telephone=no" name="format-detection" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<title>个人信息</title>
	<link rel="stylesheet" href="css/m-reset.css">
	<link rel="stylesheet" href="css/m-publicrem.new.css">
	<link rel="stylesheet" href="font/font-awesome.min.css">
	<link rel="stylesheet" href="css/qzCitySelect.css">
	<link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/information.css">
</head>
<body>
	
    <!-- <article> -->
   	    <div class="personal_title"><i class="iconfont icon-fanhui"></i>个人信息</div>
        <div class="photo">
            
            <div class="mingcheng">
                头像
            </div>
            <i class="iconfont icon-more"></i>
            <div class="touxiang">
                <img src="img/toux.png" alt="头像">
            </div>
            
        </div>
        <div class="nicheng"><span class="xinxi_left">昵称</span><i class="iconfont icon-more"></i><span class="xinxi_right">昵称</span></div>
        <div class="sexxb"><span class="xinxi_left">性别</span><i class="iconfont icon-more"></i><span class="xinxi_right">未填写</span></div>
        <div class="phone"><span class="xinxi_left">手机号</span><i class="iconfont icon-more"></i><span class="xinxi_right">18555555555</span></div>
        <div class="birthday"><span class="xinxi_left">生日</span><i class="iconfont icon-more"></i><span class="xinxi_right">未填写</span></div>
        <div class="region"><span class="xinxi_left">地区</span><i class="iconfont icon-more"></i><span class="xinxi_right">未填写</span></div>
        <div class="modify"><span class="xinxi_left">修改密码</span><i class="iconfont icon-more"></i></div>

        
    <div class="wrappic">
         <div class="phototitle">
            <a class="fanback" href="javascript:history.go(-1);">
                <i class="iconfont icon-fanhui1"></i>
            </a>
             <span class="photoms">个人头像</span>
             <div class="morewaik">
                 <i class="iconfont icon-gengduo"></i>
                 <input id="file" class="filepic" type="file">
             </div>
             
         </div>
         <div id="clipArea" class="picarea"></div>
         <div class="suregh">
             <button id="clipBtn" class="genghuan">确认更换</button>
         </div>
         <div id="view" class="okview"></div>
    </div>  

   <!-- </article> -->


	<script type="text/javascript" src="http://{:C('QINIU_DOMAIN')}/{:OP('ALL_REAL_VIP_PCA_JSON')}"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=12a80d1749e9de182e12c6201d5e191c"></script>
    <script type="text/javascript" src="js/yanzhengx.js"></script>
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/rlpca20170608083808.js"></script>
    <script type="text/javascript" src="js/jroll.js"></script>
    <script type="text/javascript" src="js/swiper-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/qzCitySelect.js"></script>
    <script src="chajian/iscroll-zoom.js"></script>
    <script src="chajian/hammer.js"></script>
    <script src="chajian/lrz.all.bundle.js"></script>
    <script src="chajian/jquery.photoClip.js"></script>
    <script type="text/javascript">
   

  var clipArea = new bjj.PhotoClip("#clipArea", {
        size: [260, 260],
        outputSize: [640, 640],
        file: "#file",
        view: "#view",
        ok: "#clipBtn",
        loadStart: function() {
            
        },
        loadComplete: function() {
          
        },
        clipFinish: function(dataURL) {
         $('.wrappic').hide();

          var formdata = new FormData();
          formdata.append('file',base64ToBlob(dataURL));
        //   $.ajax({
        //     url: "",
        //     type: "post",
        //     data: formdata,
        //     processData: false,
        //     contentType: false,
        //     success: function (data) {
                 
        //     }
        // });

        }
    });

 
    

      function base64ToBlob(urlData) {
        var arr = urlData.split(',');
        var mime = arr[0].match(/:(.*?);/)[1] || 'image/png';
        // 去掉url的头，并转化为byte
        var bytes = window.atob(arr[1]);
        // 处理异常,将ascii码小于0的转换为大于0
        var ab = new ArrayBuffer(bytes.length);
        // 生成视图（直接针对内存）：8位无符号整数，长度1个字节
        var ia = new Uint8Array(ab);
        
        for (var i = 0; i < bytes.length; i++) {
            ia[i] = bytes.charCodeAt(i);
        }

        return new Blob([ab], {
            type: mime
        });
   
    }
    </script>

    <script type="text/javascript">
        
         $(function(){
            
             $('.photo .touxiang').click(function(event) {
                 $('.wrappic').fadeIn();
             });

         })

    </script>
</body>
</html>