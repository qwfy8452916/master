<extend name="Main:baseTemplate" />
<block name="title">
	<title>全瞰-会员数完成率</title>
</block>
<block name="style">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.min.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" type="text/css" href="{:C('168NEW_URL')}/assets/common/css/select2_metro.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/home/css/xs-gangwei.css?v={:C('STATIC_VERSION')}">
</block>
<block name="content">
	<section class="content-header">
		<h1><i class="xs-icon quankanhyswcl-icon"></i> 全瞰-会员数完成率</h1>
	</section>
	<section class="content section2">
		<form class="form-horizontal">
			<div class="from-list">
				<div class="from-item">
					<span class="width-auto">部门：</span>
					<select>
						<option value="">请选择</option>
						<option value="商务">营销中心</option>
						<option value="商务">商务</option>
						<option value="外销">外销</option>
					</select>
				</div>
				<div class="from-item" >
					<span class="timer-tit">财年：</span>
					<input type="text" name="date" class="form-control datepicker timer-input" placeholder="选择月份" value="">
					<i class="fa fa-calendar timer-icon"></i>
				</div>
				<button class="search-btn xs-btn">查询</button>
			</div>
		</form>
    </section>
    <section class="content section3 oflow">
		<div class="section3-sel">
			<div class="todo-item">
				<div class="pull-right position-relative">
					<i class="xs-icon zhushi-icon"></i>
					<div class="zhushi-info">
						<p>输入人注意事项：本页数据以部门及月份为唯一标识，其他数据均为部门及月份附属信息</p>
						<p>默认显示数据为：部门=“营销中心”的记录（每年的2月到次年1月）</p>
						<p>名词解释：（当月的数据：当日凌晨0:10，之前月数据：统计当次月1日凌晨0：10）；</p>
						<p>所有百分比类型的是指全部为：XX.X%，即取值小数点后1位，比如：90.17%取值90.2%，90.14%取值90.1%四舍五入，90%取值90.0%。</p>
						<p>以下“营销中心”数值为：（除会员数完成率外）外销部和商务部的总计</p>
						<p>1、总城市数：统计月份内已开站的所有的城市累计值</p>
						<p>2、地级市数：统计月份内《岗位城市权限》中地级市的总累计值</p>
						<p>3、会员指标：统计月份内《城市会员指标》中会员指标的总累计值</p>
						<p>4、实际总会员数：<span class="redcolor">统计次月1日凌晨0：10</span >的单倍会员数+（多倍会员数*多倍）的总和</p>
						<p>5、会员数完成率：实际总会员数/会员指标*100%</p>
						<p>6、地级市会员数完成率：地级市实际总会员数/地级市会员指标*100%</p>
						<p>7、单倍会员数：<span class="redcolor">统计次月1日凌晨0：10</span> 的单倍会员数</p>
						<p>8、多倍会员数：<span class="redcolor">统计次月1日凌晨0：10</span> 的多倍会员数，2倍会员为2个，以此类推。分段多倍的按照分段期计算多倍，比如：合作6个月，其中前2个月为多倍的，则多倍只计算前2个月。比如：本次合作时间3月10日-9月9日共6个月，其中3月10-5月9日为2倍会员，则3月10-5月9日时间段为2个会员数，其他时间为1个会员数。</p>
						<p>9、当月数据显示：以当日凌晨0:10的数值显示，比如4月16日当天数据显示为4月16日凌晨0：10的数值，分析折线图不显示4月数值。</p>
						<p>10、所有统计数值，取次月1日凌晨0：10的数值定格保存。</p>
					</div>
				</div>
			</div>
			<table id="" class="table table-bordered table-hover dataTable no-footer" role="grid" >
                <thead>
                    <tr role="row">
                    	<th class="" tabindex="0" >财年</th>
                    	<th class="" tabindex="0" >总城市数</th>
                    	<th class="" tabindex="0" >地级市数</th>
                    	<th class="" tabindex="0" >会员指标</th>
                    	<th class="" tabindex="0" >实际总会员数</th>
                    	<th class="" tabindex="0" >会员数完成率</th>
                    	<th class="" tabindex="0" >地级市会员完成率</th>
                    	<th class="" tabindex="0" >单倍会员数</th>
                    	<th class="" tabindex="0" >多倍会员数</th>
                    </tr>
                </thead>
                <tbody>
                    <tr role="row" class="odd">
                        <td><span>2017-06</span></td>
						<td><span>商务</span></td>
						<td><span>3</span></td>
						<td><span>4</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-xs-12 no-padding max-width-1352">
        	<div id="canvas" class="col-xs-6 no-padding canvas-height-300"></div>
			<div id="canvas1" class="col-xs-6 no-padding canvas-height-300"></div>
			<div id="canvas2" class="col-xs-6 no-padding canvas-height-300"></div>
        </div>
    </section>
</block>
<block name="script">
	<script src="https://cdn.bootcss.com/echarts/3.5.4/echarts.js?v={:C('STATIC_VERSION')}"></script>
	<script type="text/javascript">
		$(function() {
			
			// canvas图标
			var dom = document.getElementById("canvas");
			var dom1 = document.getElementById("canvas1");
			var dom2 = document.getElementById("canvas2");

			var myChart = echarts.init(dom);
			var myChart1 = echarts.init(dom1);
			var myChart2 = echarts.init(dom2);
			// 实际会员数同比 [参数项]
			var option = {
			    title : {
			        text: '实际会员数对比',
			        subtext: '会员数',
			        textStyle:{
					    color: '#359bed'
					}
			    },
			    tooltip : {
			        trigger: 'axis'
			    },
			    legend: {
			        data:['2017年实际会员数','2016年实际会员数'],
			        right:'60'
			    },
			    calculable : true,
			    xAxis : [
			        {
			            type : 'category',
			            boundaryGap : true,
			            data : ['01','02','03','04','05','06','07','08','09','10','11','12']
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            axisLabel : {
			                formatter: '{value}'
			            },
			            splitArea:{
				    		show:true,
				    		onGap:'boundaryGap',
				    		areaStyle:{
							    color: [
							        'rgba(250,250,250,0.3)',
							        'rgba(200,200,200,0.3)'
							    ]
							}
				    	}
			        }
			    ],
			    axis:{

			    },
			    series : [
			        {
			            name:'2017年实际会员数',
			            type:'line',
			            smooth:true,
			            data:[110, 120, 540, 320, 420, 430, 100,821,259,200,871,309],
                        itemStyle: {
				            normal: {
				                color: "#359bed",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        },
			        {
			            name:'2016年实际会员数',
			            type:'line',
			            smooth:true,
			            data:[160, 200, 500, 510, 300, 250,50,1000,700,910,300,350],
                        itemStyle: {
				            normal: {
				                color: "#f5994e",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        }
			    ]
			};
			// 会员数完成率同比 [参数项]
			var option1 = {
			    title : {
			        text: '会员数完成率同比',
			        subtext: '完成率',
			        textStyle:{
					    color: '#359bed'
					}
			    },
			    tooltip : {
			        trigger: 'axis'
			    },
			    legend: {
			        data:['2017年会员数完成率','2016年会员数完成率'],
			        right:'60'
			    },
			    calculable : true,
			    xAxis : [
			        {
			            type : 'category',
			            boundaryGap : true,
			            smooth:true,
			            data : ['01','02','03','04','05','06','07','08','09','10','11','12']
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            axisLabel : {
			                formatter: '{value}'
			            },
			            splitArea:{
				    		show:true,
				    		onGap:'boundaryGap',
				    		areaStyle:{
							    color: [
							        'rgba(250,250,250,0.3)',
							        'rgba(200,200,200,0.3)'
							    ]
							}
				    	}
			        }
			    ],
			    series : [
			        {
			            name:'2017年会员数完成率',
			            type:'line',
			            smooth:true,
			            data:[110, 120, 540, 320, 420, 430, 100,821,259,200,871,309],
			            itemStyle: {
				            normal: {
				                color: "#359bed",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        },
			        {
			            name:'2016年会员数完成率',
			            type:'line',
			            smooth:true,
			            data:[160, 200, 500, 510, 300, 250,50,1000,700,910,300,350],
			            itemStyle: {
				            normal: {
				                color: "#f5994e",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        }
			    ]
			};
			// 会员数指标同比 [参数项]
			var option2 = {
			    title : {
			        text: '会员数指标同比',
			        subtext: '指标数',
			        textStyle:{
					    color: '#359bed'
					}
			    },
			    tooltip : {
			        trigger: 'axis'
			    },
			    legend: {
			        data:['2017年会员数指标','2016年会员数指标'],
			        right:'60'
			    },
			    calculable : true,
			    xAxis : [
			        {
			            type : 'category',
			            boundaryGap : true,
			            smooth:true,
			            data : ['01','02','03','04','05','06','07','08','09','10','11','12']
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            axisLabel : {
			                formatter: '{value}'
			            },
			            splitArea:{
				    		show:true,
				    		onGap:'boundaryGap',
				    		areaStyle:{
							    color: [
							        'rgba(250,250,250,0.3)',
							        'rgba(200,200,200,0.3)'
							    ]
							}
				    	}
			        }
			    ],
			    series : [
			        {
			            name:'2017年会员数指标',
			            type:'line',
			            smooth:true,
			            data:[110, 120, 540, 320, 420, 430, 100,821,259,200,871,309],
			            itemStyle: {
				            normal: {
				                color: "#359bed",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        },
			        {
			            name:'2016年会员数指标',
			            type:'line',
			            smooth:true,
			            data:[160, 200, 500, 510, 300, 250,50,1000,700,910,300,350],
			            itemStyle: {
				            normal: {
				                color: "#f5994e",  // 会设置点和线的颜色，所以需要下面定制 line
				            }
				        },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'},
			                    // {type : 'min', name: '最小值'}
			                ]
			            }
			        }
			    ]
			};     
			myChart.setOption(option, true);
			myChart1.setOption(option1, true);
			myChart2.setOption(option2, true);
			// 窗口缩放时canvas重新渲染
			$(window).on('resize',function(){
				var myChart = echarts.init(dom);
				var myChart1 = echarts.init(dom1);
				var myChart2 = echarts.init(dom2);
				myChart.setOption(option, true);
				myChart1.setOption(option1, true);
				myChart2.setOption(option2, true);
			});
			// 时间选择
			$(".datepicker").datetimepicker({
				startView:3,
				minView:'decade',
				format:"yyyy-mm",
				autoclose:true,
				pickerPosition: "bottom-left"
			});
			// 注释信息
			$('.zhushi-icon').hover(function() {
				$('.zhushi-info').show().css('z-index','1');
			}, function() {
				$('.zhushi-info').hide();
			});
		});
	</script>
</block>