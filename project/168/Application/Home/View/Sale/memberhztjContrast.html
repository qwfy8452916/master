<extend name="Main:baseTemplate" />
<block name="title">
	<title>案例管理 - 控制台</title>
</block>
<block name="style">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.min.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" type="text/css" href="{:C('168NEW_URL')}/assets/common/css/select2_metro.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/css/global.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/newTree/css/style.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/home/css/specialarticle.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/home/css/sale.css?v={:C('STATIC_VERSION')}">
</block>

<block name="content">
<section class="content-header">
		<h1>本次会员时间统计</h1>
		<ol class="breadcrumb">
			<li>
				<a href="/"><i class="fa fa-dashboard"></i> 会员统计概览</a>
			</li>
			<li class="active">
				<a href="/homecase">会员发展</a>
			</li>
		</ol>
	</section>
	<section class="content">
        <div class="row">
            <div class="col-xs-12">
            	<div class="box box-default">
					<div class="box-body">
						<div class="h4">筛选条件</div>
						<div class="row">
							<form class="form-horizontal" method="GET" action="/tongji/order_tel">
								<div class="col-xs-12">
									<div class="col-xs-2">
										<div>城市</div>
										<select id="search" name="cs" type="text" placeholder="所属城市" class="select2-offscreen" tabindex="-1">
											<option value="">全部城市</option>
											<option value="">上海</option>
											<option value="">北京</option>
											<option value="">江苏</option>
										</select>
									</div>
									<div class="col-xs-2">
										<div>部门</div>
										<select id="search1" name="cs1" type="text" placeholder="所属城市" class="select2-offscreen" tabindex="-1">
											<option value="">全部部门</option>
											<option value="">商务</option>
											<option value="">客服</option>
										</select>
									</div>
									<div class="col-xs-2">
		                                <div>选择日期:</div>
		                                <input type="text" name="date" class="form-control datepicker"  placeholder="选择日期" value="{$date}">
		                            </div>
	                                <div class="col-xs-2 reset-padding">
	                                	<div>实际会员:</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
	                                <div class="col-xs-2 reset-padding">
	                                	<div>统计会员:</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
								</div>
                                <div class="col-xs-12 set-mt16">
                                	<div class="col-xs-2 reset-padding">
	                                	<div>396天以上:</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
	                                <div class="col-xs-2 reset-padding">
	                                	<div>177-396天</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
	                                <div class="col-xs-2 reset-padding">
	                                	<div>90-177天</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
	                                <div class="col-xs-2 reset-padding">
	                                	<div>90天以下</div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="0" value="">
	                                    </div>
	                                    <div class="col-xs-4">
	                                    	<input type="text" name="date" class="form-control" placeholder="30" value="">
	                                    </div>
	                                </div>
	                                <div class="col-xs-4 set-mt16">
	                                	<button type="button" class="btn btn-primary">开始查看</button>
										<button type="button" class="btn btn-success">保存当前筛选条件</button>
										<button type="button" class="btn btn-info">恢复默认</button>
	                                </div>
                                </div>
							</form>
						</div>
					</div>
				</div>
				<div class="box box-default">
					<div class="box-body">
						<div class="row">
							<div class="set-rel">
								<div class="col-xs-2">
									<div class="col-xs-12">
										<span>每页显示</span>
										<select>
											<option>100</option>
										</select>
										<span>条</span>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="col-xs-12" data-toggle="modal" data-target="#check-list">
										<i class="fa fa-fw fa-outdent"></i>
										<span>选择查看的列</span>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="col-xs-8">
										<i class="fa fa-fw fa-file-excel-o"></i>
										<span>导出报表</span>
									</div>
								</div>
								<div class="pull-right sale-marginright-20">
									<a href="">
										<i class="fa fa-fw fa-credit-card"></i>
										<span>查看会员总合同时间统计</span>
									</a>
								</div>
							</div>
							<div class="col-sm-12 set-mt16">
								<div class="oflow">
									<table id="myTable" class="table table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="myTable_info">
				                        <thead>
				                            <tr role="row"></tr>
				                            <tr role="row">
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">城市<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">系数<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">地级市<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">部门<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">实际会员<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">会员总数<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable" >396天数以上<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">占比<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">177-396天<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">占比<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable" >90-177天<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">占比</th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable" >90天一下<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">占比<i class="fa fa-sort-amount-desc"></i></th>
				                            </tr>
				                        </thead>
				                        <tbody>
				                            <tr role="row" class="odd">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                            <tr role="row" class="even">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                            <tr role="row" class="odd">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                            <tr role="row" class="even">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                            <tr role="row" class="odd">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                            <tr role="row" class="even">
				                                <td class="sorting_1">苏州</td>
				                                <td>2</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                                <td>30%</td>
				                                <td>90</td>
				                                <td>20%</td>
				                            </tr>
				                        </tbody>
				                    </table>
								</div>
		                    </div>
	                    	<div class="col-xs-4">总记录：<span>1500</span>条</div>
	                    	<div class="col-xs-4">
	                    		<div class="page">
		                    		<ul class="pagination">
		                    			<li><a href="javascript:void(0)" class="current">1</a></li>
		                    			<li><a class="num" href="">2</a></li>
		                    			<li><a class="next" href="">下一页</a></li>
		                    		</ul>
	                    		</div>
	                    	</div>
						</div>
					</div>
				</div>
				<div class="box box-default">
					<div class="box-body" style="background: #eee;">
						<div class="row">
							<div class="col-xs-12">
								<div class="col-xs-2">帮助说明:</div>
								<div class="row">
									<div class="col-xs-12 set-mt16">
										<div class="oflow">
											<table id="explain" class="table table-bordered dataTable no-footer" role="grid" aria-describedby="myTable_info">
						                        <thead>
						                            <tr role="row"></tr>
						                            <tr role="row" class="white">
						                            	<th class="col-xs-2">列表项</th>
						                            	<th class="sorting_asc">说明</th>
						                            	<th class="sorting">备注</th>
						                            </tr>
						                        </thead>
						                        <tbody>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">会员总数</td>
						                                <td>这里是指本月会员开始时间在本月内的会员总个数</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="even white">
						                                <td class="col-xs-2" class="sorting_1">376天以上、90天以下等概念</td>
						                                <td>本次会员时长，就是本次会员结束时间减去本次会员开始时间的天数。</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">占比</td>
						                                <td>计算公式：某类时长会员占比=某类时长会员个数/会员总数*100%</td>
						                                <td class="col-xs-4">保留两位小数。</td>
						                            </tr>
						                        </tbody>
					                    	</table>
										</div>
									</div>
								</div>
							</div>
		                </div>
					</div>
				</div>
			</div>
			<div class="modal fade" id="check-list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							<h4 class="modal-title" id="myModalLabel">选择要查看的列数</h4>
						</div>
						<div class="modal-body">
							<div class="check-label"><label class="select-all text-danger"><input type="checkbox" name=""><span>全选</span></label></div>
							<div class="select-list">
								<div class="check-label"><label><input type="checkbox" name=""><span>城市</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>系数</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>地级市</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>部门</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>实际会员</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>会员总数</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>396天数以上</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>占比</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>177-396天</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>占比</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>90-177天</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>占比</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>90天一下</span></label></div>
								<div class="check-label"><label><input type="checkbox" name=""><span>占比</span></label></div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default pull-left" data-dismiss="modal">关闭</button>
							<button type="button" class="btn btn-primary btn-ok" data-dismiss="modal">确定</button>
						</div>
					</div>
				</div>
			</div>
        </div>
    </section>
</block>
<block name="script">
	<script src="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/common/js/plugins/datetimepicker/bootstrap-datepicker.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/common/js/select2.min.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/home/js/sale.js?v={:C('STATIC_VERSION')}"></script>
	<script type="text/javascript">
		$(function() {
			$("#search").select2({
		        allowClear: true,
		        placeholder: "选择城市"
		    });
		    $("#search1").select2({
		        allowClear: true,
		        placeholder: "选择部门"
		    });
		    $("#search").select2("val","{$cs}");
		    $("#search1").select2("val","{$cs1}");
		    $(".datepicker").datepicker({
		          format:"yyyy-mm-dd",
		          minViewMode:0
		    });
		    $('#s2id_autogen1').on('focus',function(){
		    	if($("#s2id_search").find("span").text()!="全部城市"){
		    		$('.reset-padding').find('input').attr('disabled',true);
		    	}else{
		    		$('.reset-padding').find('input').attr('disabled',false);
		    	}
		    });
		    // 全选
			$('.select-all').find('input').on('click',function(){
				if($(this).is(':checked')){
					$('.select-list').find('input').each(function(index, el) {
						$(el).attr('gou','yes');
						$(el).prop('checked', true);
					});
				}else{
					$('.select-list').find('input').each(function(index, el) {
						$(el).attr('gou','no');
						$(el).prop('checked', false);
					});
				}
			});
			// 单个选择// 全选联动
            $('.select-list input').each(function(){
                $(this).on('click',function(){
                    if(!$(this).is(':checked')){
                        $(this).attr('gou','no');
                    }else{
                        $(this).attr('gou','yes'); 
                    }
                    if($('.select-list input').length == $('input[gou="yes"]').length){
                        $('.select-all input').prop('checked',true);
                    }else{
                        $('.select-all input').prop('checked',false);
                    }
                });
            });
            // 列表选择
			$('.btn-ok').on('click',function(){
				var arr=[];
				if($('.select-list input[gou="yes"]').length<=0){
					$('#myTable thead tr th').show();
					$('#myTable tbody tr td').show();
				}else{
					$('#myTable thead tr th').hide();
					$('#myTable tbody tr td').hide();
					$('.select-list input:checked').each(function(index, el){
						arr.push($('.select-list input:checked').parents().parents().eq(index).index());
					});
					for(var i=0;i<arr.length;i++){
						$('#myTable thead tr th').eq(arr[i]).show();
					}
					$('#myTable tbody tr').each(function(index, el){
						for(var i=0;i<arr.length;i++){
							$(el).children().eq(arr[i]).show();
						}	
					});
				}
			});
		});
	</script>
</block>