<extend name="Main:baseTemplate"/>
<block name="title">
	<title>全瞰-续费月数完成率</title>
</block>
<block name="style">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.min.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" type="text/css" href="{:C('168NEW_URL')}/assets/common/css/select2_metro.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/home/css/xs-gangwei.css?v={:C('STATIC_VERSION')}">
</block>
<block name="content">
	<section class="content-header">
		<h1><i class="xs-icon quankanxfyswcl-icon"></i> 全瞰-续费月数完成率</h1>
	</section>
	<section class="content section2">
		<form class="form-horizontal">
			<div class="from-list">
				<div class="from-item">
					<span class="width-auto">部门：</span>
					<select>
						<option value="">请选择</option>
						<option value="商务">营销中心</option>
						<option value="商务">商务</option>
						<option value="外销">外销</option>
					</select>
				</div>
				<div class="from-item" >
					<span class="timer-tit">年份：</span>
					<input type="text" name="date" class="form-control datepicker timer-input" placeholder="选择年份" value="">
				</div>
				<button class="search-btn xs-btn">查询</button>
			</div>
		</form>
    </section>
    <section class="content section3 oflow">
		<div class="section3-sel">
			<div class="todo-item">
				<div class="pull-right position-relative">
					<i class="xs-icon zhushi-icon"></i>
					<div class="zhushi-info">
						<p>输入人注意事项：本页数据以部门及月份为唯一标识，其他数据均为部门及月份附属信息，
                        默认显示数据为：部门=“营销中心”的记录（每年的2月到次年1月）
                         名词解释：（当月的数据：当月1日凌晨0.10到当日凌晨0:10，之前月数据：统计当月1日凌晨0.10到次月1日凌晨0：10）</p>
						<p>所有百分比类型的是指全部为：XX.X%，即取值小数点后1位，比如：90.17%取值90.2%，90.14%取值90.1%四舍五入，90%取值90.0%。
                         数值为小数点后1位的（四舍五入）：续费月数指标、实际续费月数、超出月数、<span class="redcolor">到期数</span></p>
						<p>1、部门：城市归属部门，
                          外销、商务“续费月数完成率指标、全年续费月数完成率均值、续费月数完成率<span class="redcolor">封顶值</span>、月度系数”读取《部门续费月度系数》的对应值，“续费月数完成率指标、全年续费月数完成率均值、<span class="redcolor">续费月数完成率封顶值</span>、月度系数“读取《中心续费月度系数》的对应值。</p>
						<p><span class="redcolor">2、到期数：读取系统设置中“到期数指标”。</span></p>
						<p>3、续费月数指标：<span class="redcolor">到期数*3个月</span></p>
						<p>4、实际续费月数：<span class="redcolor">读取系统设置中“实际续费月数”。</span>营销中心为外销+商务的总和</p>
						<p>5、续费月数完成率：实际续费月数/续费月数指标*100%</p>
						<p>6、续费月数完成率达成：续费月数完成率/续费月数完成率指标*100%</p>
						<p>7、系数后续费月数完成率：续费月数完成率/续费月数完成率月度系数。</p>
						<p>8、超出月数：（续费月数完成率-续费月数完成率指标）*续费月数指标，≤0的情况下均为0</p>
						<p>9、月度系数：平衡淡旺季，取去年实际续费，当月月度系数=（当月续费率+当月续费月数完成率）/（全年续费率+全年续费月数完成率），作为今年的月度系数。以上为2017财年的设定公式，2018财年之后以最新公式为准。</p>
						<p>10、当月数据显示：以当月1日凌晨0.10到当日凌晨0:10的数值显示，比如4月16日当天数据显示为4月1日凌晨0：10到4月16日凌晨0：10的数值，分析折线图不显示4月数值。</p>
						<p>13、所有统计数值，取次月1日凌晨0：10的数值定格保存。</p>
						
					</div>
				</div>
			</div>
			<table id="" class="table table-bordered table-hover dataTable no-footer" role="grid" >
                <thead>
                    <tr role="row">
                    	<th class="" tabindex="0" >月份</th>
                    	<th class="" tabindex="0" >部门</th>
                    	<th class="" tabindex="0" >到期数</th>
                    	<th class="" tabindex="0" >续费月数指标</th>
                    	<th class="" tabindex="0" >实际续费数</th>
                    	<th class="" tabindex="0" >实际续费月数</th>
                    	<th class="" tabindex="0" >续费月数完成率</th>
                    	<th class="" tabindex="0" >续费月数完成率指标</th>
                    	<th class="" tabindex="0" >续费月数完成率达成</th>
                    	<th class="" tabindex="0" >全年续费月数完成率均值</th>
                    	<th class="" tabindex="0" >系数后续费月数完成率</th>
                    	<th class="" tabindex="0" >续费月数完成率封顶值</th>
                    	<th class="" tabindex="0" >超出月数</th>
                    </tr>
                </thead>
                <tbody>
                    <tr role="row" class="odd">
                        <td><span>2017-06</span></td>
						<td><span>营销中心</span></td>
						<td><span>3</span></td>
						<td><span>4</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
						<td><span>80%</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-xs-12 no-padding max-width-1352">
	        <div id="canvas" class="col-xs-6 no-padding canvas-height-300"></div>
			<div id="canvas1" class="col-xs-6 no-padding canvas-height-300"></div>
		</div>
    </section>
</block>
<block name="script">
	<script src="https://cdn.bootcss.com/echarts/3.5.4/echarts.js?v={:C('STATIC_VERSION')}"></script>
	<script type="text/javascript">
		$(function() {
			// canvas
			var dom1 = document.getElementById("canvas");
			var dom2 = document.getElementById("canvas1");
			var myChart1 = echarts.init(dom1);
			var myChart2 = echarts.init(dom2);
			var option1 = {
			    title : {
			        text: '续费月数完成率环比',
			        // subtext: '会员数',
			        x:'left',
			        textStyle: {
                     color: '#369beb',          // 主标题文字颜色
                           },
			    },
			    tooltip : {
			        trigger: 'axis'
			    },
			    legend: {
			        data:['2017续费月数完成率指标','2017实际续费月数完成率','','2017全年续费月数完成率均值','2017续费月数完成率最高值'],
			        y:'bottom',
			        align:'left',
			        // itemGap:15,

			    },
			    calculable : true,
			    xAxis : [
			        {
			            type : 'category',
			            boundaryGap : true,
			            data : ['02','03','04','05','06','07','08']
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            axisLabel : {
			                formatter: '{value}',
			            },
			            splitArea:{
                         show:true
			                  },
			        }
			    ],
			    series : [
			        {
			            name:'2017续费月数完成率指标',
			            type:'line',
			            smooth:true,
			            data:[200,400,600,800,600,400],
			            itemStyle : {  
                                normal : {  
                                        color:'#369beb',
                                        
                                }  
                            }, 
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2017实际续费月数完成率',
			            type:'line',
			            smooth:true,
			            data:[100,200,300, 400,500,200],
			            itemStyle : {  
                                normal : {  
                                    
                                        color:'#f5994c',  
                                   
                                }  
                            },
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2017全年续费月数完成率均值',
			            type:'line',
			            smooth:true,
			            data:[50,150,100, 600,50,100],
			            itemStyle : {  
                                normal : {  
                                   
                                        color:'#de6aab'  
                                 
                                }  
                            },
			            markPoint : {
			                data : [
			                     {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2017续费月数完成率最高值',
			            type:'line',
			            smooth:true,
			            data:[10,500,100, 50, 150,500],
			            itemStyle : {  
                                normal : {  
                                    
                                        color:'#515e8a'  
                                    
                                }  
                            },
			            markPoint : {
			                data : [
			                     {type : 'max', name: '最大值'}
			                ]
			            }
			        }
			    ]
			}
			var option2 = {
			    title : {
			        text: '续费月数完成率同比',
			        // subtext: '会员数',
			        x:'left',
			        textStyle: {
                     color: '#369beb'          // 主标题文字颜色
                           },
			    },
			    tooltip : {
			        trigger: 'axis'
			    },
			    legend: {
			        data:['2017实际续费月数完成率','2017全年续费月数完成率均值','','2016实际续费月数完成率','2016全年续费月数完成率均值'],
			        y:'bottom'
			    },
			    calculable : true,
			    xAxis : [
			        {
			            type : 'category',
			            boundaryGap : true,
			            data : ['02','03','04','05','06','07','08']
			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            axisLabel : {
			                formatter: '{value}'
			            },
			            splitArea:{
                         show:true
			                  },
			        }
			    ],
			    series : [
			        {
			            name:'2017实际续费月数完成率',
			            type:'line',
			            smooth:true,
			            data:[10,500,100,50, 150,10],
			            itemStyle : {  
                                normal : {  
                                        color:'#369beb',
                                }  
                            }, 
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2017全年续费月数完成率均值',
			            type:'line',
			            smooth:true,
			            data:[50,150,100,600,50,100],
			            itemStyle : {  
                                normal : {  
                                        color:'#f5994c',
                                }  
                            }, 
			            markPoint : {
			                data : [
			                     {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2016实际续费月数完成率',
			            type:'line',
			            smooth:true,
			            data:[100,200,300,400,500,200],

			            itemStyle : {  
                                normal : {  
                                        color:'#de6aab',
                                }  
                            }, 
			            markPoint : {
			                data : [
			                     {type : 'max', name: '最大值'}
			                ]
			            }
			        },
			        {
			            name:'2016全年续费月数完成率均值',
			            type:'line',
			            smooth:true,
			            data:[200,400,600,800,600,400],
			            itemStyle : {  
                                normal : {  
                                        color:'#515e8a',
                                }  
                            }, 
			            markPoint : {
			                data : [
			                    {type : 'max', name: '最大值'}
			                ]
			            }
			        }
			    ]
			}; 
			myChart1.setOption(option1, true);
			myChart2.setOption(option2, true);
			// 窗口缩放时canvas重新渲染
			$(window).on('resize',function(){
				var myChart1 = echarts.init(dom1);
				var myChart2 = echarts.init(dom2);
				myChart1.setOption(option1, true);
				myChart2.setOption(option2, true);
			});
			// 时间选择
			$(".datepicker").datetimepicker({
				startView:3,
				minView:'decade',
				format:"yyyy-mm",
				autoclose:true,
				pickerPosition: "bottom-left"
			});
			// 注释信息
			$('.zhushi-icon').hover(function() {
				$('.zhushi-info').show().css('z-index','1');
			}, function() {
				$('.zhushi-info').hide();
			});
		})








	</script>
</block>