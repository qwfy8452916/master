<extend name="Main:baseTemplate" />
<block name="title">
	<title>案例管理 - 控制台</title>
</block>
<block name="style">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.min.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" type="text/css" href="{:C('168NEW_URL')}/assets/common/css/select2_metro.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" type="text/css" href="/assets/common/js/plugins/datetimepicker/datepicker.css?v={:C('STATIC_VERSION')}" />
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/css/global.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/common/js/plugins/newTree/css/style.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/home/css/specialarticle.css?v={:C('STATIC_VERSION')}">
	<link rel="stylesheet" href="{:C('168NEW_URL')}/assets/home/css/sale.css?v={:C('STATIC_VERSION')}">
</block>

<block name="content">
<style type="text/css">
	.reset-padding .col-xs-4{
		padding: 0 10px 0 0;
		position: relative;
	}
	.reset-padding .col-xs-4:last-child::after{
		content: '';
		width: 8px;
		height: 1px;
		background: #ccc;
		position: absolute;
		top: 15px;
		left: -9px;
	}
	.set-mt16{
		margin-top: 16px;
	}
	.set-pos{
		position: absolute;
		right: 0;
		top: 0;
	}
	.set-rel{
		position: relative;
	}
	.set-rel .col-xs-2 .col-xs-8,
	.set-pos{
		padding: 0;
		cursor: pointer;
	}
	.set-rel .col-xs-2 i{
		font-size: 20px;
	}
	.white{
		background: #fff;
	}
	.set-pos .set-pos-el{
		position: absolute;
		top: 0;
		right: 15px;
	}
	/*百分号*/
	.before-line::before{
		content: '到';
		width: 8px;
		height: 8px;
		position: absolute;
		top: 10px;
		left: -15px;
	}
	.percent-sign{
		position: absolute;
		right: 15px;
		top: 25%;
	}
	.check-label{
		display: inline-block;
		width: 110px;
	}
	.select-list .check-label{
		display: inline-block;
		width: 180px;
	}
	.judge-input{
		-moz-user-select: none; /*火狐*/
		-webkit-user-select: none; /*webkit浏览器*/
		-ms-user-select: none; /*IE10*/
		-khtml-user-select: none; /*早期浏览器*/
		user-select: none;
	}
	.form-control{padding: 2px 6px !important;}
	.nowrap{white-space:nowrap;}
	.oflow{overflow: auto;}
</style>
	<section class="content-header">
		<span class="h3">城市会员发展对比分析</span><a href="#">返回上一级</a>
	</section>

	<section class="content">
        <div class="row">
            <div class="col-xs-12">
            	<div class="box box-default">
					<div class="box-body">
						<div class="h4">筛选条件</div>
						<div class="row">
							<form class="form-horizontal" method="GET" action="/tongji/order_tel">
								<div class="col-xs-12">
									<div class="col-xs-2">
										<div>城市</div>
										<select id="search" name="cs" type="text" placeholder="所属城市" class="select2-offscreen" tabindex="-1">
											<option value="">全部城市</option>
											<option value="">上海</option>
											<option value="">北京</option>
											<option value="">江苏</option>
										</select>
									</div>
									<div class="col-xs-2">
										<div>部门</div>
										<select id="search1" name="cs1" type="text" placeholder="所属城市" class="select2-offscreen" tabindex="-1">
											<option value="">全部部门</option>
											<option value="">商务</option>
											<option value="">客服</option>
										</select>
									</div>
									<div class="col-xs-2">
										<div>对比项</div>
										<select id="search2" name="cs2" type="text" placeholder="会员数" class="select2-offscreen" tabindex="-1">
											<option value="">会员数</option>
											<option value="">会员完成率</option>
											<option value="">退费会员数</option>
											<option value="">续费会员数</option>
										</select>
									</div>
									<div class="col-xs-4">
		                                <div>选择周期</div>
		                                <div class="col-xs-6" style="margin:0;padding: 0 15px 0 0;">
	                                    	<input type="text" name="date" class="form-control datepicker"  placeholder="选择日期" value="{$date}">
	                                    </div>
	                                    <div class="col-xs-6 before-line" style="margin:0;padding: 0 15px 0 0;">
	                                    	<input type="text" name="date" class="form-control datepicker"  placeholder="选择日期" value="{$date}">
	                                    </div>
		                            </div>
								</div>
								
                                <div class="col-xs-12 set-mt16">
	                                <div class="col-xs-4 set-mt16 pull-right">
	                                	<button type="button" class="btn btn-primary">开始查看</button>
										<button type="button" class="btn btn-success">保存当前格式</button>
										<button type="button" class="btn btn-info">恢复默认格式</button>
	                                </div>
                                </div>
							</form>
						</div>
					</div>
				</div>
				<div class="box box-default">
					<div class="box-body">
						<div class="row">
							<div class="set-rel">
								<div class="col-xs-2">
									<div class="col-xs-8">
										<span>每页显示</span>
										<select>
											<option>100</option>
										</select>
										<span>条</span>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="col-xs-8" data-toggle="modal" data-target="#check-list">
										<i class="fa fa-fw fa-outdent"></i>
										<span>选择查看的列</span>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="col-xs-8">
										<i class="fa fa-fw fa-file-excel-o"></i>
										<span>导出报表</span>
									</div>
								</div>
							</div>
							<div class="col-sm-12 set-mt16">
								<div class="oflow">
									<table id="myTable" class="table table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="myTable_info">
				                        <thead>
				                            <tr role="row">
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable" >城市<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">地级市<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">城市系数<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">管辖部门<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">师长<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">区域经理<i class="fa fa-sort-amount-desc"></i></th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable" >选择周期-201607</th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">同比周期-201507</th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">环比周期-201507</th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">同比</th>
				                            	<th class="sorting nowrap" tabindex="0" aria-controls="myTable">环比</th>
				                            
				                            </tr>
				                        </thead>
				                        <tbody>
				                            <tr role="row" class="odd">
				                                <td class="sorting_1">苏州</td>
				                                <td>昆山</td>
				                                <td>昆山</td>
				                                <td>商务</td>
				                                <td>50</td>
				                                <td>100</td>
				                                <td>18</td>
				                                <td>30%</td>
				                                <td>30</td>
				                                <td>40%</td>
				                                <td>40</td>
				                              
				                            </tr>
				                        </tbody>
				                    </table>
								</div>
		                    </div>
	                    	<div class="col-xs-4">总记录：<span>1500</span>条</div>
	                    	<div class="col-xs-4">
	                    		<div class="page">
		                    		<ul class="pagination">
		                    			<li><a href="javascript:void(0)" class="current">1</a></li>
		                    			<li><a class="num" href="">2</a></li>
		                    			<li><a class="next" href="">下一页</a></li>
		                    		</ul>
	                    		</div>
	                    	</div>
						</div>
					</div>
				</div>
				<!-- 查看列的模态框 -->
				<div class="modal fade" id="check-list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							    <h4 class="modal-title" id="myModalLabel">选择要查看的列数</h4>
							</div>
							<div class="modal-body judge-input" style="height: auto;overflow: hidden;">
								<div class="check-label"><label class="select-all text-danger"><input type="checkbox" name=""><span>全选</span></label></div>
								<div class="select-list">
									<div class="check-label"><label><input type="checkbox" name=""><span>城市</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>地级市</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>城市系数</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>管辖部门</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>师长</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>区域经理</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>选择周期-201607</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>同比周期-201507</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>环比周期-201507</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>同比</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>环比</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>选择周期-201607</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>同比周期-201507</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>环比周期-201507</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>同比</span></label></div>
									<div class="check-label"><label><input type="checkbox" name=""><span>环比</span></label></div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default pull-left" data-dismiss="modal">关闭</button>
							    <button type="button" class="btn btn-primary btn-ok" data-dismiss="modal">确定</button>
							</div>
						</div>
					</div>
				</div>
				<div class="box box-default">
					<div class="box-body" style="background: #eee;">
						<div class="row">
							<div class="col-xs-12">
								<div class="col-xs-2">帮助说明:</div>
								<div class="row">
									<div class="col-xs-12 set-mt16">
										<div class="oflow">
											<table id="explain" class="table table-bordered dataTable no-footer" role="grid" aria-describedby="myTable_info">
						                        <thead>
						                            <tr role="row"></tr>
						                            <tr role="row" class="white">
						                            	<th class="col-xs-2">列表项</th>
						                            	<th class="sorting_asc">说明</th>
						                            	<th class="sorting">备注</th>
						                            </tr>
						                        </thead>
						                        <tbody>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">系数</td>
						                                <td>数据来源：后台城市重点系数设置。</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="even white">
						                                <td class="col-xs-2" class="sorting_1">师长</td>
						                                <td>数据来源：后台城市职能部门设置。</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">区域经理</td>
						                                <td>数据来源：后台城市职能部门设置。</td>
						                                <td class="col-xs-4">新会员不纳入续费会员统计</td>
						                            </tr>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">会员指标</td>
						                                <td>数据来源：后台会员指标设置</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">同比</td>
						                                <td>同比=（选择周期的值-同比周期的值）/同比周期的值*100%</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                            <tr role="row" class="odd white">
						                                <td class="col-xs-2" class="sorting_1">环比</td>
						                                <td>环比=（选择周期的值-环比周期的值）/环比周期的值*100%</td>
						                                <td class="col-xs-4">...</td>
						                            </tr>
						                        </tbody>
					                    	</table>
										</div>
									</div>
								</div>
							</div>
		                </div>
					</div>
					</div>
				</div>
            </div>
        </div>
    </section>
</block>
<block name="script">
	<script src="{:C('168NEW_URL')}/assets/common/js/plugins/select2/select2.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/common/js/plugins/datetimepicker/bootstrap-datepicker.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/common/js/select2.min.js?v={:C('STATIC_VERSION')}"></script>
	<script src="{:C('168NEW_URL')}/assets/home/js/sale.js?v={:C('STATIC_VERSION')}"></script>
	<script type="text/javascript">
		$(function() {
			$("#search").select2({
		        allowClear: true,
		        placeholder: "选择城市"
		    });
		    $("#search1").select2({
		        allowClear: true,
		        placeholder: "选择部门"
		    });
		    $("#search2").select2({
		        allowClear: true,
		        placeholder: "选择部门"
		    });
		    $("#search").select2("val","{$cs}");
		    $("#search1").select2("val","{$cs1}");
		    $("#search2").select2("val","{$cs2}");
		    $(".datepicker").datepicker({
		          format:"yyyy-mm-dd",
		          minViewMode:0
		    });
		    // 全选
			$('.select-all').find('input').on('click',function(){
				if($(this).is(':checked')){
					$('.select-list').find('input').each(function(index, el) {
						$(el).attr('gou','yes');
						$(el).prop('checked', true);
					});
				}else{
					$('.select-list').find('input').each(function(index, el) {
						$(el).attr('gou','no');
						$(el).prop('checked', false);
					});
				}
			});
			// 单个选择// 全选联动
            $('.select-list input').each(function(){
                $(this).on('click',function(){
                    if(!$(this).is(':checked')){
                        $(this).attr('gou','no');
                    }else{
                        $(this).attr('gou','yes'); 
                    }
                    if($('.select-list input').length == $('input[gou="yes"]').length){
                        $('.select-all input').prop('checked',true);
                    }else{
                        $('.select-all input').prop('checked',false);
                    }
                });
            });
            // 列表选择
			$('.btn-ok').on('click',function(){
				var arr=[];
				if($('.select-list input[gou="yes"]').length<=0){
					$('#myTable thead tr th').show();
					$('#myTable tbody tr td').show();
				}else{
					$('#myTable thead tr th').hide();
					$('#myTable tbody tr td').hide();
					$('.select-list input:checked').each(function(index, el){
						arr.push($('.select-list input:checked').parents().parents().eq(index).index());
					});
					for(var i=0;i<arr.length;i++){
						$('#myTable thead tr th').eq(arr[i]).show();
					}
					$('#myTable tbody tr').each(function(index, el){
						for(var i=0;i<arr.length;i++){
							$(el).children().eq(arr[i]).show();
						}	
					});
				}
			});
		});
	</script>
</block>