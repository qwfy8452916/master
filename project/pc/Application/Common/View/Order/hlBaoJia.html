<div class="hlbox">
    <div class="qu-ap-left">
        <h3>4份价值万元{:date("Y")}年设计与报价方案</h3>
        <p>
            <input placeholder="请输入免费领取的手机号"  name="topbar_tel" value="" type="text" maxlength="11">
            <input type="hidden" name="topbar_fb_type" value="sheji">
        <input class="butt" id="topbarBJ" type="submit" value="3秒免费领"></p>
    </div>
    <div class="qu-ap-right">
        <h3>装修开工必须<span class="red">吉利</span>！10秒测算您的装修<span class="red">吉日</span>！</h3>
        <p>
            <select class="selet" name="xztime">
            <option value="1">一个月内装修</option>
            <option value="2">半年内装修</option>
            <option value="3">半年后装修</option>
            </select>
            <input placeholder="请输入免费领取的手机号" name="hltel" type="text" maxlength="11">
            <input type="hidden" name="hlfb_type" value="huangli">
            <input class="butt" type="submit" value="测算吉日">
        </p>
    </div>
</div>
<script type="text/javascript">
$(".qu-ap-right .butt").click(function(event){
    var _this = $(this);
    if(!App.validate.run($("input[name=hltel]").val())){
        $("input[name=hltel]").focus();
        $.pt({
            target: $("input[name=hltel]"),
            content: '请填写正确的手机号码 ^_^!',
            width: 'auto'
        });
        return false;
    } else {
        var reg = new RegExp("^(13|14|15|17|18)[0-9]{9}$");
        if (!reg.test($("input[name=hltel]").val())) {
            $("input[name=hltel]").focus();
            $.pt({
                target: $("input[name=hltel]"),
                content: '请填写正确的手机号码 ^_^!',
                width: 'auto'
            });
            return false;
        }
    }

    window.order({
        extra:{
            tel: $("input[name=hltel]").val(),
            fb_type: $("input[name=hlfb_type]").val(),
            hltime: $(".qu-ap-right select[name=xztime]").val(),
            source: '181',
            safecode:$("#safecode").val(),
            safekey: $("#safekey").val(),
            ssid:"",
            step:99
        },
        error:function(){
            $.pt({
                target: _this,
                content: '发布失败,请刷新页面！',
                width: 'auto'
            });
        },
        success:function(data, status, xhr){
            $("#safecode").val(data.data.safecode);
            $("#safekey").val(data.data.safekey);
            if (data.status == 1) {
                $("body").append(data.data.tmp);
            } else {
                $.pt({
                    target: _this,
                    content: data.info,
                    width: 'auto'
                });
            }
        },
        validate:function(item, value, method, info){
            return true;
        }
    });
});
$("#topbarBJ").click(function(event){
    var _this = $(this);
    if(!App.validate.run($(".hlbox input[name=topbar_tel]").val())){
        $(".hlbox input[name=topbar_tel]").focus();
        $.pt({
            target: $(".hlbox input[name=topbar_tel]"),
            content: '请填写正确的手机号码 ^_^!',
            width: 'auto'
        });
        return false;
    } else {
        var reg = new RegExp("^(13|14|15|17|18)[0-9]{9}$");
        if (!reg.test($(".hlbox input[name=topbar_tel]").val())) {
            $(".hlbox input[name=topbar_tel]").focus();
            $.pt({
                target: $(".hlbox input[name=topbar_tel]"),
                content: '请填写正确的手机号码 ^_^!',
                width: 'auto'
            });
            return false;
        }
    }

    window.order({
        extra:{
            tel: $(".hlbox input[name=topbar_tel]").val(),
            fb_type: $(".hlbox input[name=topbar_fb_type]").val(),
            source: '180',
            safecode:$("#safecode").val(),
            safekey: $("#safekey").val(),
            ssid:"",
            step:2
        },
        error:function(){
            $.pt({
                target: _this,
                content: '发布失败,请刷新页面！',
                width: 'auto'
            });
        },
        success:function(data, status, xhr){
            $("#safecode").val(data.data.safecode);
            $("#safekey").val(data.data.safekey);
            if (data.status == 1) {
                $("body").append(data.data.tmp);
            } else {
                $.pt({
                    target: _this,
                    content: data.info,
                    width: 'auto'
                });
            }
        },
        validate:function(item, value, method, info){
            return true;
        }
    });
});
</script>